# Delete all oh-my-zsh boilerplate. `source ~/bin/binrc` in .zshrc instead.

# Replace all boilerplate oh-my-zsh .zshrc.
export ZSH="$HOME/.oh-my-zsh"
# https://gist.github.com/lukasschwab/8807cd69a833a5d214a442a38fa6bb97
ZSH_THEME="lukas"

# Several inistalled by git cloning into .oh-my-zsh/custom/plugins.
plugins=(
	git
	shrink-path
	command-time # git@github.com:popstas/zsh-command-time.git
	zsh-autosuggestions # git@github.com:zsh-users/zsh-autosuggestions
	kube-ps1
	fzf
	direnv
)

source $ZSH/oh-my-zsh.sh

# Toggle k8s context display with `kubeon`, `kubeoff`.
# https://github.com/jonmosco/kube-ps1
export KUBE_PS1_PREFIX=""
export KUBE_PS1_SUFFIX=" "
export KUBE_PS1_SYMBOL_ENABLE=false
PROMPT='$(kube_ps1)'$PROMPT
kubeoff

# Enable fzf CTRL-R history search.
source <(fzf --zsh)

export PATH="$PATH:$HOME/bin:$HOME/bin/work"
export PATH="/Users/lukas.schwab/.local/bin:$PATH"

export CLICOLOR=1

# Prefer nvim.
alias vim="nvim"
alias vi="nvim"
alias oldvim="/usr/bin/vim"
export EDITOR=nvim
export VISUAL="$EDITOR"

alias cdp="cd ~/Programming"
alias cdd="cd ~/Desktop"

alias nocolor="sed -r 's/\x1B\[([0-9]{1,3}(;[0-9]{1,3})*)?[mGK]//g'"

function up() {
    cd $(git rev-parse --show-cdup)
}

function bd() {
    mergeBase=$(git merge-base origin/main HEAD)
    git diff $mergeBase
}

function killport() {
    echo 'ðŸš¨ Killing all processes at port' $1
    lsof -ti tcp:$1 | xargs kill
}

